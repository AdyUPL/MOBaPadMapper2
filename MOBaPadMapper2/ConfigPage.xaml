<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MOBaPadMapper2.ConfigPage"
             BackgroundColor="#222222"
             Title="Konfiguracja przycisków">

    <VerticalStackLayout Padding="16" Spacing="12">

        <Label x:Name="ProfileNameLabel"
               Text="Profil"
               FontSize="20"
               FontAttributes="Bold"
               TextColor="White" />

        <Label Text="Lista mapowań profilu. Każdy kafelek odpowiada jednemu przyciskowi na padzie."
               FontSize="12"
               TextColor="LightGray" />

        <!-- Debug o liczbie mapowań -->
        <Label x:Name="DebugLabel"
               FontSize="10"
               TextColor="LightGray" />

        <!-- Lista przycisków profilu -->
        <CollectionView x:Name="MappingsList"
                        SelectionMode="None">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical"
                                 Span="2" />
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="8"
                           Margin="4"
                           CornerRadius="12"
                           BackgroundColor="#333333">
                        <VerticalStackLayout Spacing="4">

                            <!-- Główne kółko / przycisk -->
                            <Button x:Name="MappingButton"
                                    WidthRequest="60"
                                    HeightRequest="60"
                                    CornerRadius="30"
                                    BackgroundColor="DarkOrange"
                                    TextColor="Black"
                                    FontAttributes="Bold"
                                    Text="{Binding TriggerButton}" />

                            <!-- Szczegóły mapowania -->
                            <Label FontSize="10"
                                   TextColor="LightGray">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="Akcja: " />
                                        <Span Text="{Binding ActionType}" />
                                        <Span Text=" | X=" />
                                        <Span Text="{Binding TargetX, StringFormat='{}{0:F2}'}" />
                                        <Span Text=" Y=" />
                                        <Span Text="{Binding TargetY, StringFormat='{}{0:F2}'}" />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>

                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </VerticalStackLayout>
</ContentPage>
